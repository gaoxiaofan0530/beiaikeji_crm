(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-731126ba"],{9968:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-drawer",{staticClass:"drawer_body",attrs:{title:"店铺信息",visible:t.drawer,direction:t.direction,"before-close":t.handleClose,size:"100"},on:{"update:visible":function(e){t.drawer=e}}},[i("div",{staticClass:"demo-drawer__content"},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"ID","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:t.shop_edit.id,callback:function(e){t.$set(t.shop_edit,"id",e)},expression:"shop_edit.id"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"点评ID","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:t.shop_edit.shop_id_edit,callback:function(e){t.$set(t.shop_edit,"shop_id_edit",e)},expression:"shop_edit.shop_id_edit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"店名","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择活动区域",disabled:!0},model:{value:t.shop_edit.shop_name_edit,callback:function(e){t.$set(t.shop_edit,"shop_name_edit",e)},expression:"shop_edit.shop_name_edit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"拜访日期","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择活动区域",disabled:!0},model:{value:t.shop_edit.time,callback:function(e){t.$set(t.shop_edit,"time",e)},expression:"shop_edit.time"}})],1),t._v(" "),""===t.shop_add_form?i("el-form-item"):i("el-form-item",[i("el-divider",[t._v("客户信息")])],1),t._v(" "),t._l(t.shop_add_form,(function(e,a){return i("el-form-item",{key:e.key,staticStyle:{width:"80%"},attrs:{label:e.label,"label-width":t.formLabelWidth}},["文本类型"===e.type?i("span",[i("el-input",{attrs:{disabled:!0},on:{blur:function(i){return t.edit_shop_add_form(a,e.value)}},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"domain.value"}})],1):t._e(),t._v(" "),"日期类型"===e.type?i("span",[i("el-date-picker",{attrs:{type:"date",disabled:!0,placeholder:"选择日期"},on:{change:function(i){return t.edit_shop_add_form(a,e.value)}},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"domain.value"}})],1):t._e(),t._v(" "),"选择下拉框"===e.type?i("span",[i("el-select",{attrs:{type:"date",disabled:!0,placeholder:"选择内容"},on:{change:function(i){return t.edit_shop_add_form(a,e.value)}},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"domain.value"}},t._l(e.select,(function(t){return i("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),"大文本框"===e.type?i("span",[i("el-input",{attrs:{type:"textarea",disabled:!0},on:{blur:function(i){return t.edit_shop_add_form(a,e.value)}},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"domain.value"}})],1):t._e()])}))],2)],1)]),t._v(" "),i("div",{staticClass:"filter-container",staticStyle:{"margin-left":"15px","margin-top":"25px"}},["admin"===t.roles?i("span",[i("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:function(e){return t.xiaoshou_change(t.xiaoshou_value)}},model:{value:t.xiaoshou_value,callback:function(e){t.xiaoshou_value=e},expression:"xiaoshou_value"}},t._l(t.xiaoshou_options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e()]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","margin-left":"15px","margin-right":"30px"},attrs:{data:t.tableData,border:"",fit:"",stripe:"","highlight-current-row":""},on:{"row-click":t.data_update}},[i("el-table-column",{attrs:{prop:"id",label:"ID","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"visit_id",label:"商户ID","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"visit_shop_name",label:"店名","show-overflow-tooltip":"",width:"450"}}),t._v(" "),i("el-table-column",{attrs:{prop:"visit_time",label:"拜访日期","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"210","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return["admin"===t.roles?i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[i("el-button",{attrs:{size:"mini",type:"danger",content:"删除",placement:"top"},on:{click:function(i){return i.stopPropagation(),t.handleDelete(e.row)}}},[i("i",{staticClass:"el-icon-delete"})])],1)],1):t._e()]}}])})],1),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[i("el-pagination",{staticStyle:{"margin-bottom":"15px"},attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager,jumper, next, sizes, total","page-sizes":[10,20,50,100],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},s=[],o=(i("b775"),i("0f9a")),l={name:"DataList",data:function(){return{num:"2019",roles:"",xiaoshou_value:"",xiaoshou_options:[],regions:[{id:"西城区",label:"西城区"},{id:"海淀区",label:"海淀区"},{id:"东城区",label:"东城区"},{id:"石景山区",label:"石景山区"},{id:"朝阳区",label:"朝阳区"},{id:"丰台区",label:"丰台区"},{id:"顺义区",label:"顺义区"},{id:"房山区",label:"房山区"},{id:"大兴区",label:"大兴区"},{id:"昌平区",label:"昌平区"},{id:"通州区",label:"通州区"},{id:"昌平区",label:"昌平区"},{id:"密云区",label:"密云区"},{id:"怀柔区",label:"怀柔区"},{id:"平谷区",label:"平谷区"},{id:"延庆区",label:"延庆区"},{id:"门头沟区",label:"门头沟区"},{id:"区域",label:"区域"}],categorys:[{id:"美发",label:"美发"},{id:"美容/SPA",label:"美容/SPA"},{id:"美甲美睫",label:"美甲美睫"},{id:"医学美容",label:"医学美容"},{id:"瑜伽",label:"瑜伽"},{id:"舞蹈",label:"舞蹈"},{id:"纹绣",label:"纹绣"},{id:"瘦身纤体",label:"瘦身纤体"},{id:"纹身",label:"纹身"},{id:"祛痘",label:"祛痘"},{id:"化妆品",label:"化妆品"},{id:"产后塑形",label:"产后塑形"},{id:"养发",label:"养发"},{id:"行业",label:"行业"}],business_districts:"",types:[{id:"新签",label:"新签"},{id:"断约",label:"断约"},{id:"续约",label:"续约"},{id:"新店",label:"新店"},{id:"合作状态",label:"合作状态"}],listQuery:{title:void 0},shop_kp_position:[{id:"大老板",label:"大老板"},{id:"合伙人",label:"合伙人"},{id:"经理",label:"经理"},{id:"店长",label:"店长"},{id:"前台",label:"前台"},{id:"技师",label:"技师"}],shop_kp_city:[{id:"北京市",label:"北京市"},{id:"上海市",label:"上海市"},{id:"天津市",label:"天津市"},{id:"武汉市",label:"武汉市"},{id:"南京市",label:"南京市"},{id:"青岛市",label:"青岛市"},{id:"成都市",label:"成都市"},{id:"厦门市",label:"厦门市"},{id:"宁波市",label:"宁波市"},{id:"杭州市",label:"杭州市"},{id:"西安市",label:"西安市"},{id:"武汉市",label:"武汉市"},{id:"深圳市",label:"深圳市"}],shop_edits:[],shop_kp_categorys:[{id:"初次联系（微信/电话沟通）",label:"初次联系（微信/电话沟通）"},{id:"待约见客户未见面（意向）",label:"待约见客户未见面（意向）"},{id:"已到店可跟（潜在）",label:"已到店可跟（潜在）"},{id:"已到店意向不大",label:"已到店意向不大"},{id:"已签约客户（新签）",label:"已签约客户（新签）"},{id:"已签约老客户（续约）",label:"已签约老客户（续约）"}],shop_add_form:"",shop_add_form_edit:"",shop_edit:{time:void 0,shop_table_row:void 0,shop_id_edit:void 0,id:void 0,shop_name_edit:void 0,shop_tags_edit:void 0,shop_kp_name_edit:void 0,shop_telephonenumber_edit:void 0,shop_kp_position_edit:void 0,shop_kp_city_edit:void 0,shop_kp_category_edit:void 0,shop_business_district_edit:void 0,shop_region_edit:void 0,shop_kp_wechat_id_edit:void 0,shop_address_edit:void 0,user_edit:void 0,text_edit:void 0,shop_add_form_edit:void 0},type:"合作状态",region:"区域",category:"行业",business_district:"商圈",tableData:[],multipleSelection:[],total:0,pagesize:10,currentPage:1,loading:!0,drawer:!1,direction:"rtl",options:[],formLabelWidth:"80px",timer:null,editData:{},remoteFuncs:{},dynamicData:{}}},created:function(){this.roles=o["default"].state["avatar"],"admin"===o["default"].state["avatar"]&&this.get_xiaoshou_data(),this.addUser(this.pagesize,this.currentPage,this.region,this.business_district,this.category,this.type,""),this.shangquan("商圈");var t=new Date,e="-",i=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();a>=1&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),this.num=i+e+a+e+s},methods:{addUser:function(t,e,i,a,s,l,n){var d=this;""===this.xiaoshou_value?this.axios.get("http://152.32.135.62/app/table_simple_visit/",{params:{pagesize:t,currentPage:e,username:o["default"].state["first_name"]}}).then((function(t){d.tableData=t.data.data,d.total=t.data.total,d.loading=!1,console.log(d.tableData)})).catch((function(t){this.loading=!1,console.log(t)})):this.axios.get("http://152.32.135.62/app/table_simple_visit/",{params:{pagesize:t,currentPage:e,username:this.xiaoshou_value}}).then((function(t){d.tableData=t.data.data,d.total=t.data.total,d.loading=!1,console.log(d.tableData)})).catch((function(t){this.loading=!1,console.log(t)}))},xiaoshou_change:function(t){this.xiaoshou_value=t,this.addUser(this.pagesize,this.currentPage)},get_xiaoshou_data:function(){var t=this;this.axios.get("http://152.32.135.62/app/get_xiaoshou_data/").then((function(e){t.xiaoshou_options=e.data.data}))},edit_shop:function(t,e,i,a,s,o,l,n,d,h,r,p,_,c){var u=this;this.axios.get("http://152.32.135.62/app/table_simple_data_edit/",{params:{shop_id:t,shop_tags:e,shop_kp_name:i,shop_telephonenumber:a,shop_kp_position:s,shop_kp_city:o,shop_kp_category:l,shop_kp_wechat_id:n,shop_region:h,shop_business_district:r,shop_category:d,shop_address:p,user_name:_,shop_edit:c}}).then((function(t){u.$notify({title:"操作成功",message:"",type:"success"}),u.addUser(u.pagesize,u.currentPage,u.region,u.business_district,u.category,u.type,u.listQuery.title)})).catch((function(t){this.loading=!1,console.log(t)}))},pull_get:function(t){var e=this;this.axios.get("http://152.32.135.62/app/pull_add/",{params:{username:o["default"].state["first_name"],shop_id:t.shop_id,shop_name:t.shop_name,shop_start:t.shop_start,shop_review_count:t.shop_review_count,shop_bad_review:t.shop_bad_review,shop_per_capita_consumption:t.shop_per_capita_consumption,shop_effect:t.shop_effect,shop_surroundings:t.shop_surroundings,shop_service:t.shop_service,shop_region:t.shop_region,shop_business_district:t.shop_business_district,shop_category:t.shop_category,shop_address:t.shop_address,shop_telephonenumber:t.shop_telephonenumber,shop_edit:t.shop_edit,shop_tags:t.shop_tags,shop_kp_name:t.shop_kp_name,shop_kp_wechat_id:t.shop_kp_wechat_id,shop_kp_city:t.shop_kp_city,shop_kp_category:t.shop_kp_category,shop_kp_position:t.shop_kp_position,shop_add_form:t.shop_add_form}}).then((function(t){3==t.data.state?e.$notify({title:"私海商户数量达到允许最大值",message:"",type:"error"}):(e.$notify({title:"拉入成功",message:"",type:"success"}),e.addUser(e.pagesize,e.currentPage,e.region,e.business_district,e.category,e.type,e.listQuery.title))})).catch((function(t){this.loading=!1,console.log(t)}))},get_shop_edit:function(t){var e=this;this.axios.get("http://152.32.135.62/app/table_simple_get_edit/",{params:{shop_id:t}}).then((function(t){e.shop_edits=t.data.data})).catch((function(t){this.loading=!1,console.log(t)}))},get_shop_add_form:function(t){var e=this;this.axios.get("http://152.32.135.62/app/table_simple_get_form/",{params:{shop_id:t}}).then((function(t){e.shop_add_form=t.data.data,e.console.log("编辑信息",e.shop_add_form.length);for(var i=0,a=e.this.shop_add_form.length;i<a;i++)e.shop_edit[i]=void 0;console.log(e.shop_edit)})).catch((function(t){this.loading=!1,console.log(t)}))},shangquan:function(t){var e=this;this.axios.get("http://152.32.135.62/app/search_business_circle/",{params:{region:t}}).then((function(t){e.business_districts=t.data.data})).catch((function(t){this.loading=!1,console.log(t)}))},regions_data:function(t){console.log("选中值",t.label),this.region=t.label,this.shangquan(t.label),this.addUser(this.pagesize,this.currentPage,t.label,this.business_district,this.category,this.type,this.listQuery.title)},edit_shop_add_form:function(t,e){var i=this;console.log("失去焦点",this.shop_edit.id,t,e),this.axios.get("http://152.32.135.62/app/edit_shop_add_form_data_edit_baifang/",{params:{shop_id:this.shop_edit.shop_id_edit,id:this.shop_edit.id,index:t,value:e}}).then((function(t){i.$notify({title:"操作成功",message:"",type:"success"})})).catch((function(t){this.loading=!1,console.log(t)}))},business_district_data:function(t){this.business_district=t.label,this.shangquan(this.region),this.addUser(this.pagesize,this.currentPage,this.region,t.label,this.category,this.type,this.listQuery.title),this.qryTableDate()},category_data:function(t){this.category=t.label,this.addUser(this.pagesize,this.currentPage,this.region,this.business_district,t.label,this.type,this.listQuery.title)},business_district_edit:function(t){this.shop_edit.shop_business_district_edit=t.label,this.shangquan(t.label)},category_edit:function(t){this.shangquan(this.shop_edit.shop_business_district_edit),this.shop_edit.shop_category_edit=t.label},regions_data_edit:function(t){this.shop_edit.shop_region_edit=t.label},kp_category_edit:function(t){this.shop_edit.shop_kp_category_edit=t.label},kp_city_edit:function(t){this.shop_edit.shop_kp_city_edit=t.label},kp_position_edit:function(t){this.shop_edit.shop_kp_position_edit=t.label},type_data:function(t){console.log(t),this.type=t.label,this.addUser(this.pagesize,this.currentPage,this.region,this.business_district,this.category,t.label,this.listQuery.title)},select_input:function(t){this.listQuery.title=t,this.addUser(this.pagesize,this.currentPage,this.region,this.business_district,this.category,this.type,t)},data_update:function(t,e,i){this.drawer=!0,this.shop_edit.shop_table_row=t,this.shop_edit.shop_id_edit=t.visit_id,this.shop_edit.id=t.id,this.shop_edit.shop_name_edit=t.visit_shop_name,this.shop_edit.time=t.visit_time,this.shop_add_form=t.visit_data},current_change:function(t){this.currentPage=t},jump_href:function(t,e){console.log(e),window.open("https://www.dianping.com/shop/"+e.shop_id)},handleSizeChange:function(t){this.pagesize=t,this.addUser(t,this.currentPage),this.qryTableDate()},handleCurrentChange:function(t){console.log("第几页",t),this.currentPage=t,this.addUser(this.pagesize,t),this.qryTableDate()},handleDelete:function(t){var e=this;this.$confirm("确定要删除拜访吗? 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.get("http://152.32.135.62/app/delete_visit/",{params:{visit_data:JSON.stringify(t.visit_data),id:t.id}}).then((function(t){1==t.data.state?e.$notify({title:"删除成功",message:"",type:"success"}):e.$notify({title:"删除失败",message:"",type:"error"}),e.addUser(e.pagesize,e.currentPage,e.region,e.business_district,e.category,e.type,"")})).catch((function(t){this.loading=!1,console.log(t)}))})).catch((function(){e.$notify({title:"已取消删除",message:"",type:"info"})}))}}},n=l,d=(i("f95b"),i("2877")),h=Object(d["a"])(n,a,s,!1,null,null,null);e["default"]=h.exports},cbda:function(t,e,i){},f95b:function(t,e,i){"use strict";var a=i("cbda"),s=i.n(a);s.a}}]);