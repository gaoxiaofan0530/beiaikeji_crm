(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d4060dd"],{"105d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-drawer",{staticClass:"drawer_body",attrs:{title:"待审核信息",visible:e.drawer,direction:e.direction,"before-close":e.handleClose,size:"100"},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"订单编号","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.pending_review.order_id,callback:function(t){e.$set(e.pending_review,"order_id",t)},expression:"pending_review.order_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商户名称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.pending_review.shop_name,callback:function(t){e.$set(e.pending_review,"shop_name",t)},expression:"pending_review.shop_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务项目","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择活动区域",disabled:!0},model:{value:e.pending_review.project,callback:function(t){e.$set(e.pending_review,"project",t)},expression:"pending_review.project"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务奖金","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择活动区域",disabled:!0},model:{value:e.pending_review.money,callback:function(t){e.$set(e.pending_review,"money",t)},expression:"pending_review.money"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截止时间","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择活动区域",disabled:!0},model:{value:e.pending_review.time,callback:function(t){e.$set(e.pending_review,"time",t)},expression:"pending_review.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销售","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择活动区域",disabled:!0},model:{value:e.pending_review.username,callback:function(t){e.$set(e.pending_review,"username",t)},expression:"pending_review.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"进度","label-width":e.formLabelWidth}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.pending_review.schedule}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"filter-container",staticStyle:{"margin-left":"15px","margin-top":"25px"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{filterable:"","value-key":"id",placeholder:"类型"},on:{change:e.suatus},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e}})})),1),e._v(" "),"admin"===e.roles?a("span",[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:function(t){return e.xiaoshou_change(e.xiaoshou_value)}},model:{value:e.xiaoshou_value,callback:function(t){e.xiaoshou_value=t},expression:"xiaoshou_value"}},e._l(e.xiaoshou_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","margin-left":"15px","margin-right":"30px"},attrs:{data:e.tableData,border:"",fit:"",stripe:"","highlight-current-row":""},on:{"row-click":e.data_update}},[a("el-table-column",{attrs:{label:"订单编号","show-overflow-tooltip":"",prop:"order_id",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shop_name",label:"商户",width:"450","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return["已完成"===i.suatus?a("div",[a("span",{staticClass:"link-type",staticStyle:{color:"#606266"},on:{click:function(t){e.data_update(i),e.drawer=!0}}},[e._v(e._s(i.shop_name))]),e._v(" "),a("el-tag",{attrs:{type:"success",effect:"dark"}},[e._v(e._s(i.suatus))])],1):"未完成"===i.suatus?a("div",[a("span",{staticClass:"link-type",staticStyle:{color:"#606266"},on:{click:function(t){e.data_update(i),e.drawer=!0}}},[e._v(e._s(i.shop_name))]),e._v(" "),a("el-tag",{attrs:{type:"danger",effect:"dark"}},[e._v(e._s(i.suatus))])],1):"待审核"===i.suatus?a("div",[a("span",{staticClass:"link-type",staticStyle:{color:"#606266"},on:{click:function(t){e.data_update(i),e.drawer=!0}}},[e._v(e._s(i.shop_name))]),e._v(" "),a("el-tag",{attrs:{type:"warning",effect:"dark"}},[e._v(e._s(i.suatus))])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"服务项目","show-overflow-tooltip":"",prop:"project"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"截止时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"money","show-overflow-tooltip":"",label:"服务奖金"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username","show-overflow-tooltip":"",label:"实施人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"210","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"===e.roles?a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"转移",placement:"top-start"}},[a("el-button",{attrs:{size:"mini",type:"primary",content:"转移",placement:"top"},on:{click:function(a){return a.stopPropagation(),e.transfer_order(t.row)}}},[a("i",{staticClass:"el-icon-refresh"})])],1)],1):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-pagination",{staticStyle:{"margin-bottom":"15px"},attrs:{"current-page":e.currentPage,background:"",layout:"prev, pager,jumper, next, sizes, total","page-sizes":[10,20,50,100],total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"订单转移",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"当前销售","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",disabled:!0},model:{value:e.now_admin,callback:function(t){e.now_admin=t},expression:"now_admin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"转移销售","label-width":e.formLabelWidth,prop:"xiaoshou_value_transfer"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择要转给谁"},model:{value:e.form.xiaoshou_value_transfer,callback:function(t){e.$set(e.form,"xiaoshou_value_transfer",t)},expression:"form.xiaoshou_value_transfer"}},e._l(e.xiaoshou_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.transfer_update("form")}}},[e._v("确 定")])],1)],1)],1)},l=[],o=a("ade3"),s=(a("b775"),a("0f9a")),n={name:"DataList",data:function(){var e,t;return t={business_districts:"",roles:"",now_admin:"",form:{xiaoshou_value_transfer:""},row:"",dialogFormVisible:!1,types:[{id:"已完成",label:"已完成"},{id:"未完成",label:"未完成"},{id:"待审核",label:"待审核"}],listQuery:{title:void 0},shop_kp_position:[{id:"大老板",label:"大老板"},{id:"合伙人",label:"合伙人"},{id:"经理",label:"经理"},{id:"店长",label:"店长"},{id:"前台",label:"前台"},{id:"技师",label:"技师"}],shop_kp_city:[{id:"北京市",label:"北京市"},{id:"上海市",label:"上海市"},{id:"天津市",label:"天津市"},{id:"武汉市",label:"武汉市"},{id:"南京市",label:"南京市"},{id:"青岛市",label:"青岛市"},{id:"成都市",label:"成都市"},{id:"厦门市",label:"厦门市"},{id:"宁波市",label:"宁波市"},{id:"杭州市",label:"杭州市"},{id:"西安市",label:"西安市"},{id:"武汉市",label:"武汉市"},{id:"深圳市",label:"深圳市"}],shop_edits:[],shop_add_form:[],shop_add_form_edit:"",pending_review:(e={project:"",shop_name:"",time:"",money:"",schedule:"",username:"",submitter:"",submit_time:""},Object(o["a"])(e,"username",""),Object(o["a"])(e,"suatus",""),Object(o["a"])(e,"order_id",""),e),type:"已完成",region:"全部",suatus_name:"已完成",category:"全部",business_district:"全部",tableData:[],multipleSelection:[],total:0,pagesize:10,currentPage:1,loading:!0,drawer:!1,direction:"rtl",options:[]},Object(o["a"])(t,"roles",""),Object(o["a"])(t,"formLabelWidth","80px"),Object(o["a"])(t,"timer",null),Object(o["a"])(t,"editData",{}),Object(o["a"])(t,"remoteFuncs",{}),Object(o["a"])(t,"dynamicData",{}),Object(o["a"])(t,"xiaoshou_value",""),Object(o["a"])(t,"xiaoshou_options",[]),Object(o["a"])(t,"rules",{xiaoshou_value_transfer:[{required:!0,message:"请选择要转移到的销售",trigger:"blur"}]}),t},created:function(){this.roles=s["default"].state["avatar"],"admin"===s["default"].state["avatar"]?this.get_xiaoshou_data():this.xiaoshou_value=s["default"].state["first_name"],this.addUser(this.pagesize,this.currentPage,this.suatus_name,this.xiaoshou_value),this.shangquan("全部")},mounted:function(){this.addUser(),this.shangquan("全部")},methods:{addUser:function(e,t,a,i){var l=this;this.axios.get("http://152.32.135.62/app/table_simple_to_do/",{params:{pagesize:e,currentPage:t,suatus:a,username:i}}).then((function(e){l.tableData=e.data.data,l.total=e.data.total,l.loading=!1})).catch((function(e){this.loading=!1,console.log(e)}))},data_update:function(e,t,a){this.drawer=!0,this.pending_review.project=e.project,this.pending_review.order_id=e.order_id,this.pending_review.shop_name=e.shop_name,this.pending_review.time=e.time,this.pending_review.money=e.money,this.pending_review.schedule=e.schedule,this.pending_review.username=e.username,this.pending_review.submitter=e.submitter,this.pending_review.submit_time=e.submit_time,this.pending_review.edit=e.edit,this.getLocation(e.lng,e.lat),console.log(e)},transfer_order:function(e){var t=this;console.log(e),this.row=e,this.now_admin=e.username,this.$confirm("确定要转移任务吗? 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dialogFormVisible=!0}))},transfer_update:function(e){var t=this;this.$confirm("确定要转移任务吗? 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.axios.get("http://152.32.135.62/app/transfer_update/",{params:{order_id:t.row.order_id,username:t.form.xiaoshou_value_transfer,type:t.type,project:t.row.project}}).then((function(e){1==e.data.state?(t.dialogFormVisible=!1,t.$notify({title:"转移成功",message:"",type:"success"}),t.addUser(t.pagesize,t.currentPage,t.suatus_name,t.xiaoshou_value)):t.$notify({title:"转移失败",message:"",type:"error"})})).catch((function(e){this.loading=!1,console.log(e)}))}))}))},get_xiaoshou_data:function(){var e=this;this.axios.get("http://152.32.135.62/app/get_xiaoshou_data/").then((function(t){e.xiaoshou_options=t.data.data}))},current_change:function(e){this.currentPage=e},handleEdit:function(e){var t=this;console.log("编辑",e),this.axios.get("http://152.32.135.62/app/audit_failure/",{params:{project:e.project,shop_name:e.shop_name,time:e.time,money:e.money,schedule:e.schedule,username:e.username}}).then((function(e){t.addUser(t.pagesize,t.currentPage),t.$notify({title:"操作成功",message:"",type:"success"})})).catch((function(e){this.loading=!1,console.log(e)}))},xiaoshou_change:function(e){this.addUser(this.pagesize,this.currentPage,this.suatus_name,this.xiaoshou_value)},suatus:function(){this.suatus_name=this.type.label,console.log(this.suatus_name),this.addUser(this.pagesize,this.currentPage,this.suatus_name,this.xiaoshou_value)},handleSizeChange:function(e){this.pagesize=e,this.addUser(e,this.currentPage,this.suatus_name,this.xiaoshou_value),this.qryTableDate()},handleCurrentChange:function(e){console.log("第几页",e),this.currentPage=e,this.addUser(this.pagesize,e,this.suatus_name,this.xiaoshou_value),this.qryTableDate()}}},r=n,d=(a("b119"),a("2877")),u=Object(d["a"])(r,i,l,!1,null,null,null);t["default"]=u.exports},"5a7d":function(e,t,a){},b119:function(e,t,a){"use strict";var i=a("5a7d"),l=a.n(i);l.a}}]);